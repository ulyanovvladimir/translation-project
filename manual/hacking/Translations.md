<!--- Copyright (C) 2009-2015 Typesafe Inc. <http://www.typesafe.com> -->
# Перевод Документации Play 

Play 2.3+ предоставляет инфраструктуру в помощь переводчикам докумментации Play для того чтобы держать ее актуальной.

Как описано в [[Методических Рекомендациях по Документации|Documentation]], документация Play написана в формате markdown с примерами кода, вынесенными в отдельные файлы. Play допускает переводить компоненты markdown документации, позволяя включать ориганальные примеры кода из англоязычной документации. Это помогает переводчикам в сохранении качества перевода - примеры кода всегда сохраняются актуальными как часть ядра проекта Play, в то время как переведенныые описания должны поддерживаться вручную.

В дополнение к этому, Play также предоставляет возможности по валидации целостности переведенной документации. Это включает валидацию всех внутренних ссылок, включая ссылки на сниппеты кода в переводе.

## Технические требования

Вам необходимо иметь установленный `activator` или `sbt`.  Также будет полезно иметь копию репозитория Play, с веткой, которую вы переводите, таким образом, чтобы у вас было что скопировать и с чего начать.

Если вы переводите не релизную версию документации Play, тогда вам потребуется сначала собрать ту версию Play и опубликовать ее локально на вашей машине. Это можно сделать выполнив:

```bash
./build publishLocal
```

в дирекории `framework` проекта Play.

## Подготовка к переводу

Создайте новый SBT проект со следующей структурой:

```
translation-project
  |- manual
  | |- javaGuide
  | |- scalaGuide
  | |- gettingStarted
  | `- etc...
  |- project
  | |- build.properties
  | `- plugins.sbt
  `- build.sbt
```

`build.properties` должен содержать версию SBT, например:

```
sbt.version=0.13.8
```

`plugins.sbt` должен включать Play docs sbt плагин, т.е.:

```scala
addSbtPlugin("com.typesafe.play" % "play-docs-sbt-plugin" % "%PLAY_VERSION%")
```

Наконец, `build.sbt` должен включать Play docs плагин, то есть:

```scala
lazy val root = (project in file(".")).enablePlugins(PlayDocsPlugin)
```

Теперь вы готовы начать переводить!

## Перевод документации

Во-первых запустите сервер документации. Сервер документации предоставит вам вашу документацию, так что вы сможете видеть прогресс в процессе. Чтобы это сделать вам потребуется установленный `sbt` или `activator`, хотя пойдет любой, здесь в примерах будет использоваться `sbt`:

```bash
$ sbt run
[info] Set current project to root (in build file:/Users/jroper/tmp/foo-translation/)
[info] play - Application started (Dev)
[info] play - Listening for HTTP on /0:0:0:0:0:0:0:0:9000

Documentation server started, you can now view the docs by going to http://0:0:0:0:0:0:0:0:9000
```

Теперь откройте <http://localhost:9000> в браузере.  Вы должны увидеть документацию Play по-умолчанию (англоязычную). Самое время перевести вашу первую страницу.

Скопируйте страницу markdown из репозитория Play в ваш проект. Важно убедиться, что структура каталогов в вашем проекте соответствует структуре каталогов в Play, это гарантирует, что примеры кода будут работать.

Например, если вы выбираете начать с `manual/scalaGuide/main/http/ScalaActions.md`, тогда вам нужно убедиться, что есть соответствующий `manual/scalaGuide/main/http/ScalaActions.md` в вашем проекте.

> **Заметка:** Может быть заманчиво начать с копирования всего руководства по Play в ваш проект. Если вы это сделаете, убедитесь, что вы скопируете только файлы markdown, что вы не копируете файлы с ппримерами кода.  Если вы скопируете примеры кода, они будут перекрывать примеры кода из Play, и у потеряете преимущество от автоматической поддержки примеров кода.

Теперь вы можете начать переводить файл.

## Работа с примерами кода

Документация Play полна примеров кода. Как описано в [[Методических рекомендациях по Документации|Documentation]], эти примеры кода живут снаружи разметки документации и живут в скомпилированных и протестированных исходниках. Сниппеты из этих файлов вклюаются в документацию с использованием следующего синтаксиса:

```
@[label](code/path/to/SourceFile.java)
```

Вообще, вы захотите оставить эти сниппеты как есть в вашем переводе, это даст гарантию, что вставки кода сохраняют свою актуальность в Play.

В некоторых ситуациях, есть смысл переопределить их. Вы можете сделать это либо вставкой кода прямо в документацию, используя огороженный блок, или извлекая их в собственные примеры кода вашего проекта. Если вы так делаете, проверьте файлы сборки вашего sbt проекта Play-евской документациии, для того чтобы узнать как вы должны установить SBT для их компиляции.

## Валидация документации

Play docs sbt plugin предоставляет задачу для валидации документации, которая прогоняет некоторые простые тесты по документации чтобы убедиться в целостности ссылок и связей с примерами кода. Вы можете запустить ее с помощью:

```bash
sbt validateDocs
```

Вы также можете провалидировать ссылки на внешние сайты в документации Play. Это отдельная задача поскольку она зависит от многих сайтов в интернете, на которые ссылается докумментация Play, и задача валидации в действительности запускает DDoS фильтры на некоторых сайтах. Чтобы запустить, выполните:

```bash
sbt validateExternalLinks
```

## Отчет о переводе

Еще один очень полезный инструмент, предоставляемый Play - это отчет о переводе, который показывает, какие файлы не были переведены и также пытается обнаружить проблемы, например, если перевод вводидт новые файлы, или если в переводе отсутствуют примеры кода. Это может частично помочь в переводе новой версии документации, т.к. добавление или удаление примера кода часто будет хорошим сигналом, что что-то изменилось.

Чтобы увидть отчет о переводе запустите сервер с документацией (как обычно), и затем поситите <http://localhost:9000/@report> в вашем браузере. По-умолчанию эта страница предоставит скэшированную версию отчета, если такая была сгенерирована в прошлом, вы можете перезапустить отчет, нажав на ссылку "rerun report".

## Размещение документации в playframework.com

[playframework.com](https://playframework.com) собирает документацию из git репозиториев. Если вы хотите, чтобы ваш перевод был предоставлен на сайте playframework.com, вам нужно будет поместить свою документацию на GitHub, и связаться с командой Play чтобы они добавили ее на playframework.com.

Репозиторий git должен быть в очень определенном, специальном формате. Текущая ветка master для документации последней версии Play. Документация для стабильных версий Play должна быть в ветках, таких как 2.3.x. Документация, специфичная к отдельным релизам Play будет предоставляться по тэгу репозитория с этим именем, например 2.3.1.

Единожды, команда Play сконфигурировав playframework.com для предоставления вашего перевода, любые изменения залитые в ваш репозиторий на GitHubбудут подцеплены в течение около 10 минут, так как playframework.com делает `git fetch` п всем репозиториям, которые он использует раз в 10 минут.

## Определение версии документации

По умолчанию, `play-docs-sbt-plugin` использует ту же версию примеров кода документации Play и запасные markdown файлы, поэтому, если в `plugins.sbt` вы используете `2.4.0`, когда вы запускаете документацию, вы получите `2.4.0` версию примеров кода. Вы можете контролировать эту версию, установив  `PlayDocsKeys.docsVersion` в `build.sbt`:

```scala
PlayDocsKeys.docsVersion := "2.3.1"
```

Это особенно полезно, если вы хотите предоставить документацию для версий Play предшествующих к тому моменту, когда `play-docs-sbt-plugin` был введен в версии `2.2.0`.  Для версий `2.1.x` и ранее документация не упакована и не опубликована в виде jar файла, поэтому инструментарий не будет работать для этих более старых версий.
